<div class="browsing-section">
    <div class="browsing-section-heading">
        <h2>Suggested From Your Browsing</h2>
    </div>
    <button class="scroll-btn left" onclick="scrollLeft()"><i class="fas fa-chevron-left"></i></button>
    <div class="browsing-container" id="browsingContainer">
        <!-- Dynamic content will be appended here -->
    </div>
    <button class="scroll-btn right" onclick="scrollRight()"><i class="fas fa-chevron-right"></i></button>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const browsingContainer = document.getElementById('browsingContainer');

        // Fetch browsing history data
        fetch('/browsing-history')
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    console.error(data.error);
                    return;
                }

                // Populate the browsing container with product cards
                data.forEach(product => {
                    const card = document.createElement('div');
                    card.classList.add('browsing-card');

                    const img = document.createElement('img');
                    img.classList.add('browsing-card-img');
                    img.src = product.image;
                    img.alt = product.title;

                    const description = document.createElement('p');
                    description.classList.add('browsing-card-description');
                    description.textContent = product.title;

                    card.appendChild(img);
                    card.appendChild(description);
                    browsingContainer.appendChild(card);
                });
            })
            .catch(err => console.error('Error fetching browsing history:', err));

        window.scrollLeft = function() {
            browsingContainer.scrollBy({ left: -200, behavior: 'smooth' });
        };

        window.scrollRight = function() {
            browsingContainer.scrollBy({ left: 200, behavior: 'smooth' });
        };
    });
</script>
